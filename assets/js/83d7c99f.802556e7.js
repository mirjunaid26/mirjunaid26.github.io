"use strict";(self.webpackChunkhpc_tutorial_website=self.webpackChunkhpc_tutorial_website||[]).push([[7048],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),h=i,m=u["".concat(l,".").concat(h)]||u[h]||d[h]||r;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:i,o[1]=s;for(var c=2;c<r;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2126:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var a=n(7462),i=(n(7294),n(3905));const r={sidebar_position:8},o="Containers for Scientific and High-Performance Computing (Apptainer/Singularity)",s={unversionedId:"tutorial-basics/apptainers",id:"tutorial-basics/apptainers",title:"Containers for Scientific and High-Performance Computing (Apptainer/Singularity)",description:"Docusaurus Plushie",source:"@site/docs/tutorial-basics/apptainers.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/apptainers",permalink:"/docs/tutorial-basics/apptainers",draft:!1,editUrl:"https://mirjunaid26.github.io/docs/tutorial-basics/apptainers.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"GUIX",permalink:"/docs/tutorial-basics/guix"},next:{title:"CUDA Python/C++",permalink:"/docs/tutorial-basics/cuda-python"}},l={},c=[{value:"CAUTION : WORK IN PROGRESS",id:"caution--work-in-progress",level:2},{value:"Containerization in HPC and Reproducible Research",id:"containerization-in-hpc-and-reproducible-research",level:2},{value:"What&#39;s container image?",id:"whats-container-image",level:2},{value:"References:",id:"references",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...r}=e;return(0,i.kt)(u,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"containers-for-scientific-and-high-performance-computing-apptainersingularity"},"Containers for Scientific and High-Performance Computing (Apptainer/Singularity)"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Docusaurus Plushie",src:n(7710).Z,width:"2076",height:"336"})),(0,i.kt)("h2",{id:"caution--work-in-progress"},"CAUTION : WORK IN PROGRESS"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"What are containers and why do we need them?"),(0,i.kt)("li",{parentName:"ol"},"Downloading and using and already existing conatiner."),(0,i.kt)("li",{parentName:"ol"},"Creating a container from scratch."),(0,i.kt)("li",{parentName:"ol"},"How to use containers for reproducible research?")),(0,i.kt)("p",null,"In the context of High-Performance Computing (HPC) and the imperative of reproducible research, it's vital to understand the concepts of containers and images. These technologies play a crucial role in facilitating the reliable and consistent execution of computational experiments and simulations."),(0,i.kt)("h2",{id:"containerization-in-hpc-and-reproducible-research"},"Containerization in HPC and Reproducible Research"),(0,i.kt)("p",null,"A container in the context of HPC and reproducible research is a meticulously isolated computational environment. It operates as a self-contained process running on an HPC cluster, ensuring strict separation from all other concurrent processes. This isolation relies on the robust capabilities of kernel namespaces and control groups (cgroups), integral features of the Linux operating system. Containers, especially those managed by tools like Docker and Singularity/Apptainer, provide an accessible and user-friendly way to harness these capabilities for the benefit of researchers and scientists."),(0,i.kt)("p",null,"In essence, a container:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Represents a runnable instance of an image, which encapsulates the entire computational environment, including software, dependencies, configurations, scripts, and binaries. These containers can be effortlessly created, launched, halted, relocated, or removed using either the Docker API or the command-line interface (CLI)."),(0,i.kt)("li",{parentName:"ol"},"Can be executed on local HPC clusters, virtualized environments, or cloud-based resources, ensuring flexibility in deployment."),(0,i.kt)("li",{parentName:"ol"},"Exhibits portability across diverse operating systems, promoting consistency and facilitating the sharing of computational workflows."),(0,i.kt)("li",{parentName:"ol"},"Guarantees isolation from other containers and maintains its own ecosystem, avoiding conflicts with concurrently executing processes.")),(0,i.kt)("p",null,"For those familiar with the concept of chroot, containers can be perceived as an extended and highly sophisticated evolution of chroot. While both chroot and containers shape the filesystem environment, containers introduce additional layers of isolation and encapsulation that surpass the capabilities of traditional chroot."),(0,i.kt)("h2",{id:"whats-container-image"},"What's container image?"),(0,i.kt)("p",null,"When a container is running, it relies on an isolated filesystem that is entirely defined by an image. An image must encompass every element necessary to run a specific computational application, encompassing all essential dependencies, configurations, scripts, binaries, and other components."),(0,i.kt)("p",null,"Furthermore, an image includes various configurations that pertain to the container itself, such as environment variables, a default command to execute upon container startup, and relevant metadata that clarifies its purpose and behavior within the HPC or research context."),(0,i.kt)("p",null,"By combining containers and images, researchers in the field of HPC and reproducible research can ensure the consistency and replicability of their computational experiments, as the entire environment, from software stacks to configurations, is encapsulated and isolated, minimizing the risk of unwanted interference and enhancing the ability to reproduce results accurately."),(0,i.kt)("h1",{id:"tp"},"TP"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"apptainer --help\n")),(0,i.kt)("p",null,"It will gice the description of the apptainer and various options using apptainer.\nThere are lots of different options but we are going to focus on shell, run, exec, build, and sign and verify. We are not gonna cover everything."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cat /etc/os-release\n")),(0,i.kt)("p",null,'PRETTY_NAME="Ubuntu 22.04.3 LTS"\nNAME="Ubuntu"\nVERSION_ID="22.04"\nVERSION="22.04.3 LTS (Jammy Jellyfish)"\nVERSION_CODENAME=jammy\nID=ubuntu\nID_LIKE=debian\nHOME_URL="',(0,i.kt)("a",{parentName:"p",href:"https://www.ubuntu.com/%22"},'https://www.ubuntu.com/"'),'\nSUPPORT_URL="',(0,i.kt)("a",{parentName:"p",href:"https://help.ubuntu.com/%22"},'https://help.ubuntu.com/"'),'\nBUG_REPORT_URL="',(0,i.kt)("a",{parentName:"p",href:"https://bugs.launchpad.net/ubuntu/%22"},'https://bugs.launchpad.net/ubuntu/"'),'\nPRIVACY_POLICY_URL="',(0,i.kt)("a",{parentName:"p",href:"https://www.ubuntu.com/legal/terms-and-policies/privacy-policy%22"},'https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"'),"\nUBUNTU_CODENAME=jammy"),(0,i.kt)("p",null,"Let's say we want to switch to another OS by grabbing a container from docker hub and shell into it using Apptainer. Let's shell into official Apline container"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"apptainer shell docker://alpine\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"cat /etc/os-release\n")),(0,i.kt)("p",null,'Apptainer> cat /etc/os-release\nNAME="Alpine Linux"\nID=alpine\nVERSION_ID=3.18.4\nPRETTY_NAME="Alpine Linux v3.18"\nHOME_URL="',(0,i.kt)("a",{parentName:"p",href:"https://alpinelinux.org/%22"},'https://alpinelinux.org/"'),'\nBUG_REPORT_URL="',(0,i.kt)("a",{parentName:"p",href:"https://gitlab.alpinelinux.org/alpine/aports/-/issues%22"},'https://gitlab.alpinelinux.org/alpine/aports/-/issues"'),"\nApptainer> "),(0,i.kt)("p",null,"You can see now that we are on Alpine Linux instead and Ubuntu. So, we just sawpped our OS with a single command. That's the essence of containers."),(0,i.kt)("h2",{id:"references"},"References:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Singularity/Apptainer Tutorial (",(0,i.kt)("a",{parentName:"li",href:"https://hsf-training.github.io/hsf-training-singularity-webpage/04-building-containers/index.html"},"https://hsf-training.github.io/hsf-training-singularity-webpage/04-building-containers/index.html"),")")))}d.isMDXComponent=!0},7710:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/apptainer-e614806cf573fd0cbbe09a25d9e69637.png"}}]);